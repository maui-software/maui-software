

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>maui.eda.eda &mdash; maui-software 0.2.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/documentation_options.js?v=58050c01"></script>
      <script src="../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            maui-software
              <img src="../../../_static/color_logo_no_background.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../maui.acoustic_indices.html">Acoustic Indices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maui.eda.html">Exploratory data analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maui.io.html">Input and Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maui.visualizations.html">Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maui.samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maui.utils.html">Utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../example_gallery.html">Example gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">maui-software</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">maui.eda.eda</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for maui.eda.eda</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module provides utilities for Exploratory Data Analysis (EDA) with an</span>
<span class="sd">emphasis on visual and summary outputs for categorical data within a DataFrame.</span>
<span class="sd">Utilizing Plotly for dynamic visualizations and FPDF for PDF report generation,</span>
<span class="sd">it supports the creation of summary cards and plots, enhancing data</span>
<span class="sd">understanding and presentation.</span>

<span class="sd">Features include:</span>
<span class="sd">- Generation of summary cards for data overview.</span>
<span class="sd">- Creation of various plots (scatter, bar, etc.) for data comparison and trend</span>
<span class="sd">  analysis.</span>
<span class="sd">- PDF report generation for easy sharing and presentation.</span>

<span class="sd">Exceptions:</span>
<span class="sd">- CategoryLimitError: Raised when an attempt is made to process more than the</span>
<span class="sd">  allowed number of categories.</span>

<span class="sd">Dependencies:</span>
<span class="sd">- plotly: For creating interactive plots.</span>
<span class="sd">- fpdf: For generating PDF reports.</span>
<span class="sd">- pandas: Assumed for DataFrame manipulation and input.</span>

<span class="sd">Functions:</span>
<span class="sd">- card_summary(df, categories, show_plot=True): Generates a summary card and</span>
<span class="sd">  plots for specified categories.</span>

<span class="sd">Note:</span>
<span class="sd">- This module is designed to work with pandas DataFrames and expects a specific</span>
<span class="sd">  structure/format for input data.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pkg_resources</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fpdf</span><span class="w"> </span><span class="kn">import</span> <span class="n">FPDF</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">plotly.express</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">px</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">plotly.figure_factory</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ff</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">plotly.graph_objects</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">go</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">plotly.subplots</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_subplots</span>


<span class="k">class</span><span class="w"> </span><span class="nc">CategoryLimitError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception raised when more than two categories are selected.&quot;&quot;&quot;</span>


<div class="viewcode-block" id="card_summary">
<a class="viewcode-back" href="../../../maui.eda.html#maui.eda.card_summary">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">card_summary</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">show_plot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a summary card and plots for specified categories from a</span>
<span class="sd">    DataFrame.</span>
<span class="sd">    This function processes the input DataFrame to compute various statistics, including the</span>
<span class="sd">    number of samples, distinct days, total and mean duration (in minutes) of some activities.</span>
<span class="sd">    It also dynamically incorporates additional specified categories into its computations and</span>
<span class="sd">    visualizations. If enabled, a plot is generated using Plotly to visually represent these</span>
<span class="sd">    statistics alongside the categories specified.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">            The input DataFrame containing at least the following columns: &#39;file_path&#39;, &#39;dt&#39;,</span>
<span class="sd">            and &#39;duration&#39;. Additional columns should match the specified categories if any.</span>
<span class="sd">    categories : list of str</span>
<span class="sd">            A list of category names (column names in `df`) to include in the summary and plot.</span>
<span class="sd">            At most two categories can be specified.</span>
<span class="sd">    show_plot : bool, optional</span>
<span class="sd">            If True (default), the function will generate and show a Plotly plot representing the</span>
<span class="sd">            calculated statistics and specified categories. If False, no plot will be displayed.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    Exception</span>
<span class="sd">            If more than two categories are specified, an exception is</span>
<span class="sd">            raised due to plotting limitations.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple</span>
<span class="sd">            Returns a tuple containing:</span>
<span class="sd">            </span>
<span class="sd">            - card_dict (dict): A dictionary with keys for &#39;n_samples&#39;,</span>
<span class="sd">                &#39;distinct_days&#39;, &#39;total_time_duration&#39;,</span>
<span class="sd">                &#39;mean_time_duration&#39;, and one key per category specified.</span>
<span class="sd">                The values are the respective</span>
<span class="sd">                computed statistics.</span>

<span class="sd">            - fig (plotly.graph_objs._figure.Figure): A Plotly figure object with indicators </span>
<span class="sd">                for each of the statistics and categories specified.</span>
<span class="sd">                Only returned if `show_plot` is True.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The function is designed to work with data pertaining to</span>
<span class="sd">    durations and occurrences across</span>
<span class="sd">    different categories. It&#39;s particularly useful for analyzing time series or event data.</span>
<span class="sd">    The &#39;duration&#39; column is expected to be in seconds.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from maui import samples, eda</span>
<span class="sd">    &gt;&gt;&gt; df = samples.get_audio_sample(dataset=&quot;leec&quot;)</span>
<span class="sd">    &gt;&gt;&gt; categories = [&#39;landscape&#39;, &#39;environment&#39;]</span>
<span class="sd">    &gt;&gt;&gt; card_dict, fig = eda.card_summary(df, categories)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">categories</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CategoryLimitError</span><span class="p">(</span><span class="s2">&quot;At most two categories should be selected.&quot;</span><span class="p">)</span>

    <span class="n">df_count</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">nunique</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">duration_mean</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">/</span> <span class="mi">60</span>
    <span class="n">duration_total</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="mi">60</span>

    <span class="n">card_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;n_samples&quot;</span><span class="p">:</span> <span class="n">df_count</span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">],</span>
        <span class="s2">&quot;distinct_days&quot;</span><span class="p">:</span> <span class="n">df_count</span><span class="p">[</span><span class="s2">&quot;dt&quot;</span><span class="p">],</span>
        <span class="s2">&quot;total_time_duration&quot;</span><span class="p">:</span> <span class="n">duration_total</span><span class="p">,</span>
        <span class="s2">&quot;mean_time_duration&quot;</span><span class="p">:</span> <span class="n">duration_mean</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">subplot_titles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distinct Days&quot;</span><span class="p">,</span> <span class="s2">&quot;Total Duration&quot;</span><span class="p">,</span> <span class="s2">&quot;Mean Duration&quot;</span><span class="p">,</span> <span class="s2">&quot;Samples&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>
        <span class="n">card_dict</span><span class="p">[</span><span class="n">category</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_count</span><span class="p">[</span><span class="n">category</span><span class="p">]</span>
        <span class="n">subplot_titles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>

    <span class="n">specs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;indicator&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;indicator&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;indicator&quot;</span><span class="p">}],</span>
        <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;indicator&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;indicator&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;indicator&quot;</span><span class="p">}],</span>
    <span class="p">]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">subplot_titles</span><span class="o">=</span><span class="n">subplot_titles</span><span class="p">,</span> <span class="n">specs</span><span class="o">=</span><span class="n">specs</span><span class="p">)</span>

    <span class="n">trace0</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Indicator</span><span class="p">(</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">card_dict</span><span class="p">[</span><span class="s2">&quot;distinct_days&quot;</span><span class="p">],</span>
        <span class="n">number</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;suffix&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>
        <span class="n">delta</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="mi">320</span><span class="p">},</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">trace0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">trace1</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Indicator</span><span class="p">(</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">card_dict</span><span class="p">[</span><span class="s2">&quot;total_time_duration&quot;</span><span class="p">],</span>
        <span class="n">number</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;suffix&quot;</span><span class="p">:</span> <span class="s2">&quot; min&quot;</span><span class="p">},</span>
        <span class="n">delta</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="mi">320</span><span class="p">},</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">trace1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">trace2</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Indicator</span><span class="p">(</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">card_dict</span><span class="p">[</span><span class="s2">&quot;mean_time_duration&quot;</span><span class="p">],</span>
        <span class="n">number</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;suffix&quot;</span><span class="p">:</span> <span class="s2">&quot; min&quot;</span><span class="p">},</span>
        <span class="n">delta</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="mi">320</span><span class="p">},</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">trace2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">trace3</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Indicator</span><span class="p">(</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">card_dict</span><span class="p">[</span><span class="s2">&quot;n_samples&quot;</span><span class="p">],</span>
        <span class="n">number</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>
        <span class="n">delta</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="mi">320</span><span class="p">},</span>
        <span class="n">domain</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">trace3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>

        <span class="n">trace_tmp</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Indicator</span><span class="p">(</span>
            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">card_dict</span><span class="p">[</span><span class="n">category</span><span class="p">],</span>
            <span class="n">number</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>
            <span class="n">delta</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="mi">320</span><span class="p">},</span>
            <span class="n">domain</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]},</span>
        <span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">trace_tmp</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>

        <span class="n">j</span> <span class="o">=</span> <span class="p">(</span><span class="n">j</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># fig.update_layout(paper_bgcolor = &quot;lightgray&quot;)</span>
    <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">card_dict</span><span class="p">,</span> <span class="n">fig</span></div>



<span class="c1"># ----------------------------------------------------------------------------</span>


<div class="viewcode-block" id="heatmap_analysis">
<a class="viewcode-back" href="../../../maui.eda.html#maui.eda.heatmap_analysis">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">heatmap_analysis</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="n">x_axis</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">y_axis</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">color_continuous_scale</span><span class="o">=</span><span class="s2">&quot;Viridis&quot;</span><span class="p">,</span>
    <span class="n">show_plot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a heatmap to analyze the relationship between two categorical</span>
<span class="sd">    variables in a DataFrame.</span>

<span class="sd">    This function groups the data by the specified `x_axis` and `y_axis`</span>
<span class="sd">    categories, counts the occurrences of each group, and then creates a</span>
<span class="sd">    heatmap visualization of these counts using Plotly Express. The heatmap</span>
<span class="sd">    intensity is determined by the count of occurrences, with an option to</span>
<span class="sd">    customize the color scale.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">            The input DataFrame containing the data to be analyzed.</span>
<span class="sd">            Must include the columns specified by `x_axis` and `y_axis`,</span>
<span class="sd">            as well as a &#39;file_path&#39; column used for counting occurrences.</span>
<span class="sd">    x_axis : str</span>
<span class="sd">            The name of the column in `df` to be used as the x-axis in the heatmap.</span>
<span class="sd">    y_axis : str</span>
<span class="sd">            The name of the column in `df` to be used as the y-axis in the heatmap.</span>
<span class="sd">    color_continuous_scale : str, optional</span>
<span class="sd">            The name of the color scale to use for the heatmap. </span>
<span class="sd">            Defaults to &#39;Viridis&#39;. For more options, refer</span>
<span class="sd">            to Plotly&#39;s documentation on color scales.</span>
<span class="sd">    show_plot : bool, optional</span>
<span class="sd">            If True (default), displays the heatmap plot. </span>
<span class="sd">            If False, the plot is not displayed but is still returned.</span>
<span class="sd">    **kwargs : dict</span>
<span class="sd">            Additional arguments for plot customization, such as `height` and `width`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple</span>
<span class="sd">            A tuple containing:</span>
<span class="sd">            - df_group (pandas.DataFrame): A DataFrame with the grouped counts</span>
<span class="sd">            for each combination of `x_axis` and `y_axis` values.</span>
<span class="sd">            - fig (plotly.graph_objs._figure.Figure): A Plotly figure object containing the heatmap.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The &#39;file_path&#39; column in the input DataFrame is used to count occurrences</span>
<span class="sd">    of each group formed by the specified `x_axis` and `y_axis` values.</span>
<span class="sd">    This function is useful for visualizing the distribution and</span>
<span class="sd">    relationship between two categorical variables.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from maui import samples, eda</span>
<span class="sd">    &gt;&gt;&gt; df = samples.get_audio_sample(dataset=&quot;leec&quot;)</span>
<span class="sd">    &gt;&gt;&gt; df_group, fig = eda.heatmap_analysis(df, &#39;landscape&#39;, &#39;environment&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Aggregates the count of occurrences based on the columns specified</span>
    <span class="n">df_group</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">y_axis</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s2">&quot;file_path&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
    <span class="n">df_group</span> <span class="o">=</span> <span class="n">df_group</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file_path&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">})</span>

    <span class="c1"># Creates all possible combinations of the categorical values</span>
    <span class="n">categorias_x</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">x_axis</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
    <span class="n">categorias_y</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">y_axis</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
    <span class="n">indice_completo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="n">categorias_x</span><span class="p">,</span> <span class="n">categorias_y</span><span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">y_axis</span><span class="p">])</span>

    <span class="c1"># Reindexes to ensure all combinations exist, filling in zeros where missing</span>
    <span class="n">df_group_complete</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">df_group</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">y_axis</span><span class="p">])</span>
        <span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">indice_completo</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Creates the pivot table for generating the heatmap</span>
    <span class="n">df_group_pivot</span> <span class="o">=</span> <span class="n">df_group_complete</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">y_axis</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>

    <span class="c1"># Builds the heatmap using Plotly Express</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
        <span class="n">df_group_pivot</span><span class="p">,</span>
        <span class="n">color_continuous_scale</span><span class="o">=</span><span class="n">color_continuous_scale</span><span class="p">,</span>
        <span class="n">text_auto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Heatmap - Número de arquivos de áudio por </span><span class="si">{</span><span class="n">x_axis</span><span class="si">}</span><span class="s2"> e </span><span class="si">{</span><span class="n">y_axis</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title_x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>
        <span class="n">width</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="mi">800</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">df_group_complete</span><span class="p">,</span> <span class="n">fig</span></div>



<span class="c1"># ----------------------------------------------------------------------------</span>


<div class="viewcode-block" id="histogram_analysis">
<a class="viewcode-back" href="../../../maui.eda.html#maui.eda.histogram_analysis">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">histogram_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_axis</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">category_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show_plot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a histogram plot for data distribution across a specified axis,</span>
<span class="sd">    optionally segmented by categories.</span>

<span class="sd">    This function creates a histogram to visualize the distribution of data</span>
<span class="sd">    in `df` along the `x_axis`, with data optionally segmented by</span>
<span class="sd">    `category_column`. The histogram&#39;s appearance, such as opacity and</span>
<span class="sd">    bar gap, is customizable. The plot is generated using Plotly Express</span>
<span class="sd">    and can be displayed in the notebook or IDE if `show_plot` is set to True.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">            The DataFrame containing the data to plot.</span>
<span class="sd">            Must include the columns specified by `x_axis`</span>
<span class="sd">            and `category_column`.</span>
<span class="sd">    x_axis : str</span>
<span class="sd">            The name of the column in `df` to be used for the x-axis of the histogram.</span>
<span class="sd">    category_column : str</span>
<span class="sd">            The name of the column in `df` that contains categorical data for</span>
<span class="sd">            segmenting the histogram. Each category will be represented with</span>
<span class="sd">            a different color.</span>
<span class="sd">    show_plot : bool, optional</span>
<span class="sd">            If True (default), the generated plot will be immediately displayed.</span>
<span class="sd">            If False, the plot will not be displayed but will still be returned</span>
<span class="sd">            by the function.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plotly.graph_objs._figure.Figure</span>
<span class="sd">            The Plotly figure object for the generated histogram.</span>
<span class="sd">            This object can be further customized or saved after the function returns.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function is designed to offer a quick and convenient way to visualize</span>
<span class="sd">    the distribution of data in a DataFrame along a specified axis.</span>
<span class="sd">    It is particularly useful for exploratory data analysis and</span>
<span class="sd">    for identifying patterns or outliers in dataset segments.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from maui import samples, eda</span>
<span class="sd">    &gt;&gt;&gt; df = samples.get_audio_sample(dataset=&quot;leec&quot;)</span>
<span class="sd">    &gt;&gt;&gt; fig = eda.histogram_analysis(df, &#39;landscape&#39;, &#39;environment&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">totals</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">x_axis</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">order</span> <span class="o">=</span> <span class="n">totals</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="n">x_axis</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="n">category_column</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Amount of samples by </span><span class="si">{</span><span class="n">x_axis</span><span class="si">}</span><span class="s2"> and segmented by </span><span class="si">{</span><span class="n">category_column</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">category_orders</span><span class="o">=</span><span class="p">{</span><span class="n">x_axis</span><span class="p">:</span> <span class="n">order</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">bargap</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">title_x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span></div>



<span class="c1"># ----------------------------------------------------------------------------</span>


<div class="viewcode-block" id="duration_analysis">
<a class="viewcode-back" href="../../../maui.eda.html#maui.eda.duration_analysis">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">duration_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">category_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">duration_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a box plot visualizing the distribution of durations across different categories.</span>

<span class="sd">    This function takes a DataFrame and creates a box plot to analyze</span>
<span class="sd">    the distribution of durations (or any numerical data) across specified</span>
<span class="sd">    categories. The box plot provides a visual representation of the central</span>
<span class="sd">    tendency, dispersion, and skewness of the data and identifies outliers.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">            The DataFrame containing the data to be analyzed.</span>
<span class="sd">            It should include at least two columns:</span>
<span class="sd">            one for the category and one for the duration</span>
<span class="sd">            (or any numerical data to be analyzed).</span>
<span class="sd">    category_column : str</span>
<span class="sd">            The name of the column in `df` that contains the categorical data. This column will be</span>
<span class="sd">            used to group the numerical data into different categories for the box plot.</span>
<span class="sd">    duration_column : str</span>
<span class="sd">            The name of the column in `df` that contains the numerical data to</span>
<span class="sd">            be analyzed. This data will be distributed into boxes according to</span>
<span class="sd">            the categories specified by `category_column`.</span>
<span class="sd">    show_plot : bool, optional</span>
<span class="sd">            If True (default), the function will display the generated box plot. If False, the plot</span>
<span class="sd">            will not be displayed, but the figure object will still be returned.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plotly.graph_objs._figure.Figure</span>
<span class="sd">            The generated Plotly figure object containing the box plot.</span>
<span class="sd">            This object can be used for further customization or to display</span>
<span class="sd">            the plot at a later time if `show_plot` is False.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The box plot generated by this function can help identify the range, interquartile range,</span>
<span class="sd">    median, and potential outliers within each category. This visual analysis is crucial for</span>
<span class="sd">    understanding the distribution characteristics of numerical data across different groups.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from maui import samples, eda</span>
<span class="sd">    &gt;&gt;&gt; df = samples.get_audio_sample(dataset=&quot;leec&quot;)</span>
<span class="sd">    &gt;&gt;&gt; fig = eda.duration_analysis(df, &#39;landscape&#39;, &#39;duration&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">box</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="n">category_column</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="n">duration_column</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Duration distribution by </span><span class="si">{</span><span class="n">category_column</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">title_x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span></div>



<span class="c1"># ----------------------------------------------------------------------------</span>


<div class="viewcode-block" id="daily_distribution_analysis">
<a class="viewcode-back" href="../../../maui.eda.html#maui.eda.daily_distribution_analysis">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">daily_distribution_analysis</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span> <span class="n">date_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">category_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyzes and visualizes the daily distribution of samples by categories.</span>

<span class="sd">    This function generates a histogram that shows the distribution of samples over days, separated</span>
<span class="sd">    by a specified category. It provides insights into how the frequency of samples varies daily</span>
<span class="sd">    and according to the categories within the specified category column.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">            The DataFrame containing the data to be analyzed. </span>
<span class="sd">            It must include the specified `date_column` and `category_column`.</span>
<span class="sd">    date_column : str</span>
<span class="sd">            The name of the column in `df` that contains date information. The values in this column</span>
<span class="sd">            should be in a date or datetime format.</span>
<span class="sd">    category_column : str</span>
<span class="sd">            The name of the column in `df` that contains categorical data,</span>
<span class="sd">            which will be used to color the bars in the histogram.</span>
<span class="sd">    show_plot : bool, optional</span>
<span class="sd">            If True (default), the function will display the generated plot. If False, the plot will</span>
<span class="sd">            not be displayed but will still be returned.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plotly.graph_objs._figure.Figure</span>
<span class="sd">            A Plotly figure object representing the histogram of daily sample distribution by</span>
<span class="sd">            the specified category. The histogram bars are colored based on the categories</span>
<span class="sd">            in the `category_column`.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The function leverages Plotly for plotting, thus ensuring interactive plots that can be further</span>
<span class="sd">    explored in a web browser. It&#39;s particularly useful for time series data where understanding the</span>
<span class="sd">    distribution of events or samples over time and across different categories is crucial.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from maui import samples, eda</span>
<span class="sd">    &gt;&gt;&gt; df = samples.get_audio_sample(dataset=&quot;leec&quot;)</span>
<span class="sd">    &gt;&gt;&gt; fig = eda.daily_distribution_analysis(df, &#39;dt&#39;, &#39;landscape&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Convert with errors=&#39;coerce&#39; to transform invalid dates to NaT (Not a Time)</span>
    <span class="n">df_original_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="n">date_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">date_column</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

    <span class="c1"># Check for invalid dates and generate warning</span>
    <span class="n">invalid_dates_count</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">date_column</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">invalid_dates_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="n">invalid_dates_count</span><span class="si">}</span><span class="s2"> invalid dates out of </span><span class="si">{</span><span class="n">df_original_size</span><span class="si">}</span><span class="s2"> total records. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;These will be removed from the analysis.&quot;</span><span class="p">,</span>
            <span class="ne">UserWarning</span>
        <span class="p">)</span>

    <span class="c1"># Remove rows with invalid dates (optional)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="n">date_column</span><span class="p">])</span>

    <span class="c1"># Calculate number of unique days</span>
    <span class="n">num_days</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">date_column</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="n">date_column</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="n">category_column</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Amount of samples by Day and </span><span class="si">{</span><span class="n">category_column</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">nbins</span><span class="o">=</span><span class="n">num_days</span>  <span class="c1"># Força um bin por dia</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">bargap</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">title_x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span></div>



<span class="c1"># ----------------------------------------------------------------------------</span>


<div class="viewcode-block" id="duration_distribution">
<a class="viewcode-back" href="../../../maui.eda.html#maui.eda.duration_distribution">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">duration_distribution</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">time_unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a distribution plot for the &#39;duration&#39; column in the provided DataFrame.</span>

<span class="sd">    This function creates a distribution plot, including a</span>
<span class="sd">    histogram and a kernel density estimate (KDE),</span>
<span class="sd">    for the &#39;duration&#39; column in the input DataFrame. </span>
<span class="sd">    It is designed to give a visual understanding of the</span>
<span class="sd">    distribution of duration values across the dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">            The DataFrame containing the data to be analyzed. </span>
<span class="sd">            It must include a column named &#39;duration&#39;,</span>
<span class="sd">            which contains numeric data.</span>
<span class="sd">    time_unit: string</span>
<span class="sd">            The time unit of the audio duration column. It is used to make it explicit in the</span>
<span class="sd">            visualization which is the time unit. Default: &#39;s&#39;</span>
<span class="sd">    show_plot : bool, optional</span>
<span class="sd">            If True (default), the function will display the generated plot. If False, the plot will</span>
<span class="sd">            not be displayed but will still be returned.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plotly.graph_objs._figure.Figure</span>
<span class="sd">            A Plotly figure object representing the distribution plot of</span>
<span class="sd">            the &#39;duration&#39; column. The plot includes both a histogram of</span>
<span class="sd">            the data and a kernel density estimate (KDE) curve.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The function uses Plotly&#39;s `create_distplot` function from the `plotly.figure_factory` module,</span>
<span class="sd">    offering a detailed visual representation of data distribution. It&#39;s particularly useful for</span>
<span class="sd">    analyzing the spread and skewness of numeric data. The KDE curve provides insight into the</span>
<span class="sd">    probability density of the durations, complementing the histogram&#39;s discrete bins.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from maui import samples, eda</span>
<span class="sd">    &gt;&gt;&gt; df = samples.get_audio_sample(dataset=&quot;leec&quot;)</span>
<span class="sd">    &gt;&gt;&gt; fig = eda.duration_distribution(df)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">group_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span>  <span class="c1"># name of the dataset</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_distplot</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">],</span> <span class="n">group_labels</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">bargap</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span>
        <span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Duration distribution&quot;</span><span class="p">,</span>
        <span class="n">title_x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="n">xaxis_title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Duration (</span><span class="si">{</span><span class="n">time_unit</span><span class="si">}</span><span class="s2">)&quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Density (number of files)&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">show_plot</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span></div>



<span class="c1"># ----------------------------------------------------------------------------</span>


<span class="k">class</span><span class="w"> </span><span class="nc">PDF</span><span class="p">(</span><span class="n">FPDF</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal class to organize the PDF generation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">footer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate footer of the PDF.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_text_color</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;Generated with &lt;3 by Maui Software - Page &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">page_no</span><span class="p">()),</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;C&quot;</span><span class="p">,</span>
        <span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_letterhead</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate title of the PDF.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_title</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate title of the PDF.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Add main title</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">subtitle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Add subtitle</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">subtitle</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1"># Add date of report</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_text_color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">today</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Add line break</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">write_to_pdf</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Set text colour, font size, and font type</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_text_color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>

    <span class="n">pdf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">write_subtitle</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write subtitle.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Set text colour, font size, and font type</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_text_color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>

    <span class="n">pdf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>


<div class="viewcode-block" id="export_file_names_summary_pdf_leec">
<a class="viewcode-back" href="../../../maui.eda.html#maui.eda.export_file_names_summary_pdf_leec">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">export_file_names_summary_pdf_leec</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">analysis_title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">210</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Export a summary PDF report with analysis of file names for LEEC project.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">        DataFrame containing the data to be analyzed.</span>
<span class="sd">    file_name : str</span>
<span class="sd">        Name of the output PDF file.</span>
<span class="sd">    analysis_title : str, optional</span>
<span class="sd">        Title of the analysis section in the PDF.</span>
<span class="sd">    width : int, optional</span>
<span class="sd">        Width of the PDF document in millimeters.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function exports a summary PDF report with various analyses of file</span>
<span class="sd">    names for the LEEC project. </span>
<span class="sd">    It includes landscape analysis, environment analysis, and duration</span>
<span class="sd">    analysis. </span>
<span class="sd">    The PDF is created using the provided DataFrame `df` and saved with</span>
<span class="sd">    the specified `file_name`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; export_file_names_summary_pdf_leec(df, &#39;summary_report.pdf&#39;, </span>
<span class="sd">                                           analysis_title=&#39;Audio Files Analysis&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;landscape&#39;</span><span class="p">,</span> <span class="s1">&#39;environment&#39;</span><span class="p">]</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">temp_dir</span><span class="p">:</span>

        <span class="n">_</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">card_summary</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/summary1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">heatmap_analysis</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="s2">&quot;landscape&quot;</span><span class="p">,</span>
            <span class="s2">&quot;environment&quot;</span><span class="p">,</span>
            <span class="n">color_continuous_scale</span><span class="o">=</span><span class="s2">&quot;Viridis&quot;</span><span class="p">,</span>
            <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/summary2.png&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">histogram_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;landscape&quot;</span><span class="p">,</span> <span class="s2">&quot;environment&quot;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/landscape1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">duration_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;landscape&quot;</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/landscape2.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">daily_distribution_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;dt&quot;</span><span class="p">,</span> <span class="s2">&quot;landscape&quot;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/landscape3.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">histogram_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;environment&quot;</span><span class="p">,</span> <span class="s2">&quot;landscape&quot;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/environment1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">duration_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;environment&quot;</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/environment2.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">daily_distribution_analysis</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;dt&quot;</span><span class="p">,</span> <span class="s2">&quot;environment&quot;</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/environment3.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">duration_distribution</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">show_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/duration1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>

        <span class="c1"># Global Variables</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Audio Files Exploratory Data Analysis&quot;</span>
        <span class="n">subtitle</span> <span class="o">=</span> <span class="n">analysis_title</span>

        <span class="c1"># Create PDF</span>
        <span class="n">pdf</span> <span class="o">=</span> <span class="n">PDF</span><span class="p">()</span>  <span class="c1"># A4 (210 by 297 mm)</span>

        <span class="c1"># First Page of PDF</span>

        <span class="c1"># Add Page</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>

        <span class="n">letterhead_cover</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span>
            <span class="s2">&quot;maui&quot;</span><span class="p">,</span> <span class="s2">&quot;data/letterhead_cover.png&quot;</span>
        <span class="p">)</span>
        <span class="n">letterhead</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;maui&quot;</span><span class="p">,</span> <span class="s2">&quot;data/letterhead.png&quot;</span><span class="p">)</span>

        <span class="c1"># Add lettterhead and title</span>
        <span class="n">create_letterhead</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">letterhead_cover</span><span class="p">)</span>
        <span class="n">create_title</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">subtitle</span><span class="p">)</span>

        <span class="c1"># Add table</span>
        <span class="n">w</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/summary1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="n">intro_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        This report contains a brief exploratory data analysis &quot;&quot;&quot;</span>\
        <span class="s2">&quot;comprehending the data obtained by audio file names. &quot;</span>\
        <span class="s2">&quot;The objective is to present an overview of the acoustic &quot;&quot;&quot;</span>\
        <span class="s2">&quot;landscapes and environments of the recordings, as well as their duration. &quot;</span>\
        <span class="s2">&quot;Further analysis such as false color spectrograms and acoustic indices &quot;</span>\
        <span class="s2">&quot;summarization can be performed with Maui Sotware analysis and &quot;</span>\
        <span class="s2">&quot;visualization tools.&quot;</span>
        <span class="n">write_to_pdf</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">intro_text</span><span class="p">)</span>

        <span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>

        <span class="n">create_letterhead</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">letterhead</span><span class="p">)</span>

        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">write_subtitle</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="s2">&quot;1. Landscape Analysis&quot;</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/landscape1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/landscape2.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/landscape3.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>
        <span class="n">create_letterhead</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">letterhead</span><span class="p">)</span>

        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">write_subtitle</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="s2">&quot;2. Environment Analysis&quot;</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/environment1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/environment2.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/environment3.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>
        <span class="n">create_letterhead</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">letterhead</span><span class="p">)</span>

        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">write_subtitle</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="s2">&quot;3. Duration Analysis&quot;</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">temp_dir</span><span class="si">}</span><span class="s2">/duration1.png&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">pdf</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Caio Ferreira Bernardo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>